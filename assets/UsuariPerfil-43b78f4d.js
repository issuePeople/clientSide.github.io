import{_ as B,N as k,r as l,s as f,a as y,o as m,c,b as w,e,w as D,h as p,v as _,F as N,f as T,p as A,i as E}from"./index-2e65afb7.js";const I={name:"UsuariPerfil",components:{NavBar:k},setup(){let t=window.location.href.split("/");l(t[t.length-1]);let x=l([]),a=l(""),v=l(""),g=l(""),h=l(""),u=l(),r=l("");function n(){let s="id=",C=decodeURIComponent(document.cookie).split(";");for(let b=0;b<C.length;b++){let d=C[b];for(;d.charAt(0)==" ";)d=d.substring(1);if(d.indexOf(s)==0)return d.substring(s.length,d.length)}return""}async function V(){let s=new FormData;s.append("username",a.value),s.append("email",v.value),s.append("nom",g.value),s.append("bio",h.value),console.log("file:",r.value[0]),r.value[0]!=null&&s.append("avatar",r.value[0]),await f("usuaris/"+n()+"/","PUT",s,"formData"),await f("usuaris/"+n()+"/","GET","").then(U=>u.value=U.avatar)}async function P(){await new Promise(s=>setTimeout(s,3e3)),u.value="https://issuestorage.s3.amazonaws.com/media/default.png"}return{allUsers:x,username:a,email:v,nom:g,bio:h,avatar:r,avatarUrl:u,setAvatarPerDefecte:P,saveChanges:V,getidCookie:n}},mounted(){let i="usuaris/"+this.getidCookie()+"/";f(i,"GET","").then(t=>{this.username=t.username,this.email=t.email,this.nom=t.nom,this.bio=t.bio,this.avatarUrl=t.avatar}),f("usuaris/","GET","").then(t=>this.allUsers=t)},components:{NavBar:k}},o=i=>(A("data-v-3401b569"),i=i(),E(),i),S={class:"master",style:{width:"100%",display:"grid","place-content":"center"}},F=o(()=>e("br",null,null,-1)),G=o(()=>e("header",null,[e("h1",{style:{color:"#1e96b1"}},"Configuració d'usuari")],-1)),j={class:"main user-profile",style:{display:"grid","grid-template-columns":"30% 67% 20%",gap:"20px"}},M={class:"project-details-image"},z={class:"image-container"},L=["src"],O={class:"add-attach"},R=o(()=>e("button",{type:"submit",id:"btnSaveAvatar",style:{display:"none"},name:"guardar_avatar",class:"btn-small button-full js-change-avatar"},null,-1)),Y=o(()=>e("p",{style:{color:"#1e96b1"}},"     Avatar per defecte",-1)),q=[Y],H={class:"project-details-form-data"},J=o(()=>e("label",{for:"username"},"Username",-1)),K=o(()=>e("label",{for:"email"},"Email",-1)),Q=o(()=>e("label",{for:"first_name"},"Nom",-1)),W=o(()=>e("label",{for:"bio"},"Bio",-1)),X={class:"submit"},Z=o(()=>e("br",null,null,-1)),$=o(()=>e("a",{href:"/"},[e("p",{style:{color:"#1e96b1","margin-left":"380px"}},"     Tancar sessió")],-1)),ee={class:"timeline-wrapper",style:{"margin-left":"30px",width:"130px"}},te=o(()=>e("h1",{style:{"white-space":"nowrap"}},"Your team",-1)),ae=["href"],ne=["src"];function se(i,t,x,a,v,g){const h=y("NavBar"),u=y("font-awesome-icon"),r=y("v-file-input");return m(),c("div",null,[w(h),e("div",S,[F,G,e("section",j,[e("div",M,[e("fieldset",z,[e("img",{src:a.avatarUrl,width:"180",height:"180"},null,8,L)]),e("div",O,[w(r,{style:{width:"180px"},label:"Canviar foto",width:"180",modelValue:a.avatar,"onUpdate:modelValue":t[0]||(t[0]=n=>a.avatar=n)},{default:D(()=>[w(u,{icon:"plus"})]),_:1},8,["modelValue"])]),R,e("button",{type:"submit",name:"guardar_avatar_defecte",class:"botonMenu",onClick:t[1]||(t[1]=(...n)=>a.setAvatarPerDefecte&&a.setAvatarPerDefecte(...n))},q)]),e("div",H,[e("fieldset",null,[J,p(e("input",{type:"text",name:"username","onUpdate:modelValue":t[2]||(t[2]=n=>a.username=n)},null,512),[[_,a.username]])]),e("fieldset",null,[K,p(e("input",{type:"text",name:"email","onUpdate:modelValue":t[3]||(t[3]=n=>a.email=n)},null,512),[[_,a.email]])]),e("fieldset",null,[Q,p(e("input",{type:"text",name:"first_name","onUpdate:modelValue":t[4]||(t[4]=n=>a.nom=n)},null,512),[[_,a.nom]])]),e("fieldset",null,[W,a.bio?p((m(),c("textarea",{key:0,"onUpdate:modelValue":t[5]||(t[5]=n=>a.bio=n),name:"bio",id:"bio",class:"ng-pristine ng-valid ng-not-empty ng-valid-maxlenght ng-touched",style:{width:"500px",height:"227px"}},null,512)),[[_,a.bio]]):p((m(),c("textarea",{key:1,name:"bio","onUpdate:modelValue":t[6]||(t[6]=n=>a.bio=n),id:"bio",class:"ng-pristine ng-valid ng-not-empty ng-valid-maxlenght ng-touched",placeholder:"Digues alguna cosa sobre tu",style:{width:"500px",height:"227px"}},null,512)),[[_,a.bio]])]),e("fieldset",X,[e("button",{onClick:t[7]||(t[7]=(...n)=>a.saveChanges&&a.saveChanges(...n)),name:"guardar_info",variant:"primary",title:"Save",class:"btn-small",style:{"margin-left":"400px"}}," Guardar ")]),Z,$]),e("div",ee,[te,e("div",null,[(m(!0),c(N,null,T(a.allUsers,n=>(m(),c("a",{href:"/#/usuari/"+n.id},[e("img",{src:n.avatar,width:"32",height:"32",style:{"border-radius":"50%","margin-right":"5px"}},null,8,ne)],8,ae))),256))])])])])])}const le=B(I,[["render",se],["__scopeId","data-v-3401b569"]]);export{le as default};
