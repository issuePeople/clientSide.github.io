import{_ as le,u as ie,r as c,s as F,a as u,o as d,c as b,e as i,b as l,h as C,v as L,w as n,t as k,g as x,k as z,m as M,d as m,F as q,f as R}from"./index-dd2de17d.js";import{S as oe}from"./SelectUsers-2aba3529.js";const se={name:"CreateIssue",components:{SelectUsers:oe},setup(){const G=ie();let a=c(""),E=c(""),e=c("Nova"),N=c("Bug"),B=c("Desitjada"),v=c("Baixa"),p=c(null),r=c(),y=c(),P=c(null),U=c(!1),I=c(""),D=c(!1),V=c([]);F("usuaris/","GET","").then(o=>V.value=o);const w=["Nova","En curs","Llesta per testejar","Tancada","Necessita informació","Rebutjada","Proposada"],T=["Bug","Pregunta","Millora"],j=["Desitjada","Menor","Normal","Important","Crítica"],A=["Baixa","Normal","Alta"];let t=c(!1),_=c(!1);function S(o,h){return"/#"+o+h}function H(o){N.value=o}function J(o){B.value=o}function K(o){v.value=o}function Q(){switch(e.value){case"Nova":return"N";case"En curs":return"D";case"Llesta per testejar":return"T";case"Tancada":return"C";case"Necessita informació":return"I";case"Rebutjada":return"R";case"Postponed":return"P";default:return"B"}}function W(){switch(N.value){case"Bug":return"B";case"Pregunta":return"P";case"Millora":return"M";default:return"B"}}function X(){switch(B.value){case"Desitjada":return"D";case"Menor":return"M";case"Normal":return"N";case"Important":return"I";case"Crítica":return"C";default:return"D"}}function Y(){switch(v.value){case"Alta":return"A";case"Normal":return"M";case"Baixa":return"B";default:return"A"}}function Z(o){p.value=o.id,r.value=o.avatar,y.value=o.username,D.value=!1}function O(){let o="id=",g=decodeURIComponent(document.cookie).split(";");for(let f=0;f<g.length;f++){let s=g[f];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(o)==0)return s.substring(o.length,s.length)}return""}function $(){let o="name=",g=decodeURIComponent(document.cookie).split(";");for(let f=0;f<g.length;f++){let s=g[f];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(o)==0)return s.substring(o.length,s.length)}return""}function ee(){let o="avatar=",g=decodeURIComponent(document.cookie).split(";");for(let f=0;f<g.length;f++){let s=g[f];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(o)==0)return s.substring(o.length,s.length)}return""}function te(){p.value=O(),r.value=ee(),y.value=$()}function ae(){p.value=null,y.value=void 0,r.value=void 0}async function ne(){let o={subject:a.value,descripcio:E.value,tipus:W(),estat:Q(),gravetat:X(),prioritat:Y(),assignacio_id:p.value,dataLimit:P.value,bloquejat:U.value,motiuBloqueig:I.value};await F("issues/","POST",o).then(h=>console.log("post response: ",h)),G.push("/list")}return{estat:e,TEstats:w,tipus:N,TTipus:T,gravetat:B,TPrioritat:A,prioritat:v,TGravetat:j,titleIssue:a,description:E,assignat:p,userAssignName:y,avatarAssignat:r,selectAssign:D,allUsers:V,dataLimit:P,isTimeLine:_,showDatePickker:t,bloquejat:U,motiuBlock:I,getidCookie:O,sethref:S,esborrar_assignacio:ae,assignSelect:Z,autoAssign:te,setGravetat:J,setTipus:H,createNewIssue:ne,setPrioritat:K}}},re={class:"lightbox lightbox-generic-form lightbox-create-edit open"},ce={class:"close",href:"/#/list"},ue=i("h2",{class:"title"},"New issue",-1),de={class:"form-wrapper"},ve={class:"main"},fe={class:"sidebar ticket-data"},me={key:0,style:{border:"1px solid black","border-radius":"10px"}},_e={key:1,style:{display:"flex","justify-content":"space-between","margin-left":"5px","margin-right":"5px","background-color":"whitesmoke",padding:"5px","min-width":"200px"}},ge=["src"],pe=["href"],ke={class:"ticket-data-container",style:{"margin-top":"10px"}},xe={style:{display:"flex","justify-content":"space-between","margin-left":"10px"}},ye=i("label",null," type ",-1),he={style:{display:"flex","justify-content":"space-between","margin-left":"10px"}},be=i("label",null," severity ",-1),Ce={style:{display:"flex","justify-content":"space-between","margin-left":"10px"}},we=i("label",null," priority ",-1),Te={class:"ticket-section ticket-detail-settings"},je={class:"ticket-detail-settings"},Ae={style:{display:"flex","justify-content":"space-between"}},Ne={style:{display:"flex","justify-content":"space-between"}},Be=i("label",{style:{"margin-top":"5px","margin-right":"5px"}},"Motiu: ",-1);function Pe(G,a,E,e,N,B){const v=u("font-awesome-icon"),p=u("v-select"),r=u("v-btn"),y=u("v-card-title"),P=u("v-text-field"),U=u("SelectUsers"),I=u("v-card-text"),D=u("v-card"),V=u("v-dialog"),w=u("v-list-item-title"),T=u("v-list-item"),j=u("v-list"),A=u("v-menu");return d(),b("div",re,[i("a",ce,[l(v,{icon:"xmark"})]),i("div",null,[ue,i("div",null,[i("div",de,[i("div",ve,[C(i("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>e.titleIssue=t),type:"text"},null,512),[[L,e.titleIssue]]),C(i("textarea",{"onUpdate:modelValue":a[1]||(a[1]=t=>e.description=t),rows:"7",placeholder:"Description",class:"description ng-pristine ng-untouched ng-valid ng-empty",style:{"margin-top":"5px"}},null,512),[[L,e.description]])]),i("div",fe,[i("div",null,[l(p,{class:"ml-3",label:"Select",density:"compact",items:e.TEstats,modelValue:e.estat,"onUpdate:modelValue":a[2]||(a[2]=t=>e.estat=t)},null,8,["items","modelValue"]),e.assignat==null?(d(),b("div",me,[l(V,{modelValue:e.selectAssign,"onUpdate:modelValue":a[4]||(a[4]=t=>e.selectAssign=t),width:"auto"},{activator:n(({props:t})=>[l(r,M(t,{variant:"text",class:"ticket-users-actions ml-0"}),{default:n(()=>[m(" Assign ")]),_:2},1040)]),default:n(()=>[l(D,{width:"600px"},{default:n(()=>[l(y,null,{default:n(()=>[m(" Select user ")]),_:1}),l(I,null,{default:n(()=>[l(P,{placeholder:"Search for users"}),l(U,{type:"assign",users:e.allUsers,onUserSelect:e.assignSelect},null,8,["users","onUserSelect"]),l(r,{onClick:a[3]||(a[3]=t=>e.selectAssign=!1),color:"red",class:"mt-10 ml-16"},{default:n(()=>[m(" close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(r,{variant:"text",onClick:a[5]||(a[5]=t=>e.autoAssign())},{default:n(()=>[m(" Assign to me ")]),_:1})])):(d(),b("div",_e,[i("img",{src:e.avatarAssignat,width:"60",height:"60"},null,8,ge),i("a",{href:e.sethref("usuaris/",e.getidCookie()),style:{"margin-top":"20px"}},k(e.userAssignName),9,pe),i("button",{onClick:a[6]||(a[6]=t=>e.esborrar_assignacio()),variant:"flat",color:"whitesmoke"},[l(v,{icon:"xmark"})])])),i("div",ke,[i("div",xe,[ye,l(A,null,{activator:n(({props:t})=>[l(r,M(t,{variant:"text"}),{default:n(()=>[m(k(e.tipus),1)]),_:2},1040)]),default:n(()=>[l(j,null,{default:n(()=>[(d(!0),b(q,null,R(e.TTipus,(t,_)=>(d(),x(T,{key:_,value:_},{default:n(()=>[l(w,{onClick:S=>e.setTipus(t)},{default:n(()=>[m(k(t),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),i("div",he,[be,l(A,null,{activator:n(({props:t})=>[l(r,M(t,{variant:"text"}),{default:n(()=>[m(k(e.gravetat),1)]),_:2},1040)]),default:n(()=>[l(j,null,{default:n(()=>[(d(!0),b(q,null,R(e.TGravetat,(t,_)=>(d(),x(T,{key:_,value:_},{default:n(()=>[l(w,{onClick:S=>e.setGravetat(t)},{default:n(()=>[m(k(t),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),i("div",Ce,[we,l(A,null,{activator:n(({props:t})=>[l(r,M({variant:"text"},t),{default:n(()=>[m(k(e.prioritat),1)]),_:2},1040)]),default:n(()=>[l(j,null,{default:n(()=>[(d(!0),b(q,null,R(e.TPrioritat,(t,_)=>(d(),x(T,{key:_,value:_},{default:n(()=>[l(w,{onClick:S=>e.setPrioritat(t)},{default:n(()=>[m(k(t),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),i("section",Te,[i("div",je,[i("div",null,[e.isTimeLine?(d(),x(r,{key:0,style:{background:"red"},variant:"flat",onClick:a[7]||(a[7]=t=>{e.isTimeLine=!1,e.showDatePickker=!1})},{default:n(()=>[l(v,{icon:"clock"})]),_:1})):(d(),x(r,{key:1,onClick:a[8]||(a[8]=t=>e.showDatePickker=!0),variant:"flat"},{default:n(()=>[l(v,{icon:"clock"})]),_:1}))]),i("div",null,[e.bloquejat?(d(),x(r,{key:0,variant:"flat",style:{background:"red","margin-left":"5px"},onClick:a[9]||(a[9]=t=>e.bloquejat=!1)},{default:n(()=>[l(v,{icon:"lock"})]),_:1})):(d(),x(r,{key:1,style:{"margin-left":"5px"},onClick:a[10]||(a[10]=t=>e.bloquejat=!0),variant:"flat"},{default:n(()=>[l(v,{icon:"lock"})]),_:1}))])])]),C(i("div",Ae,[C(i("input",{type:"date","onUpdate:modelValue":a[11]||(a[11]=t=>e.dataLimit=t)},null,512),[[L,e.dataLimit]]),l(r,{onClick:a[12]||(a[12]=t=>e.isTimeLine=!0),style:{"margin-left":"5px"},variant:"flat"},{default:n(()=>[l(v,{icon:"floppy-disk"})]),_:1})],512),[[z,e.showDatePickker]]),C(i("div",Ne,[Be,C(i("input",{type:"text","onUpdate:modelValue":a[13]||(a[13]=t=>e.motiuBlock=t)},null,512),[[L,e.motiuBlock]])],512),[[z,e.bloquejat]])])])]),l(r,{onClick:a[14]||(a[14]=t=>e.createNewIssue()),class:"btn-big add-item",style:{"margin-top":"10px","margin-bottom":"10px"}},{default:n(()=>[m(" Enviar ")]),_:1})])])])}const De=le(se,[["render",Pe]]);export{De as default};
