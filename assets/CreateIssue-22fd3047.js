import{_ as oe,u as se,r as c,s as F,a as u,o as d,c as b,e as s,b as o,h as w,v as D,w as l,t as k,g as h,k as W,m as R,d as m,F as q,f as M}from"./index-5fc12ee6.js";import{S as ie}from"./SelectUsers-35db6cfb.js";const ae={name:"CreateIssue",components:{SelectUsers:ie},setup(){const G=se();let n=c(""),E=c(""),e=c("new"),N=c("Bug"),I=c("Wishlist"),f=c("Low"),p=c(null),r=c(),y=c(),U=c(null),B=c(!1),P=c(""),V=c(!1),L=c([]);F("usuaris/","GET","").then(i=>L.value=i);const C=["new","In progress","Ready for test","Closed","Needs info","Rejected","Postponed"],T=["Bug","Question","Enhancement"],A=["Wishlist","Minor","Normal","Important","Critical"],j=["Low","Normal","High"];let t=c(!1),_=c(!1);function S(i,x){return"/#"+i+x}function H(i){N.value=i}function Q(i){I.value=i}function z(i){f.value=i}function J(){switch(e.value){case"new":return"N";case"In progress":return"D";case"Ready for test":return"T";case"Closed":return"C";case"Needs info":return"I";case"Rejected":return"R";case"Postponed":return"P";default:return"B"}}function K(){switch(N.value){case"Bug":return"B";case"Question":return"P";case"Enhancement":return"M";default:return"B"}}function X(){switch(I.value){case"Wishlist":return"D";case"Minor":return"M";case"Normal":return"N";case"Important":return"I";case"Critical":return"C";default:return"D"}}function Y(){switch(f.value){case"High":return"A";case"Normal":return"M";case"Low":return"B";default:return"A"}}function Z(i){p.value=i.id,r.value=i.avatar,y.value=i.username,V.value=!1}function O(){let i="id=",g=decodeURIComponent(document.cookie).split(";");for(let v=0;v<g.length;v++){let a=g[v];for(;a.charAt(0)==" ";)a=a.substring(1);if(a.indexOf(i)==0)return a.substring(i.length,a.length)}return""}function $(){let i="name=",g=decodeURIComponent(document.cookie).split(";");for(let v=0;v<g.length;v++){let a=g[v];for(;a.charAt(0)==" ";)a=a.substring(1);if(a.indexOf(i)==0)return a.substring(i.length,a.length)}return""}function ee(){let i="avatar=",g=decodeURIComponent(document.cookie).split(";");for(let v=0;v<g.length;v++){let a=g[v];for(;a.charAt(0)==" ";)a=a.substring(1);if(a.indexOf(i)==0)return a.substring(i.length,a.length)}return""}function te(){p.value=O(),r.value=ee(),y.value=$()}function ne(){p.value=null,y.value=void 0,r.value=void 0}async function le(){let i={subject:n.value,descripcio:E.value,tipus:K(),estat:J(),gravetat:X(),prioritat:Y(),assignacio_id:p.value,dataLimit:U.value,bloquejat:B.value,motiuBloqueig:P.value};console.log("result obj: ",i),await F("issues/","POST",i).then(x=>console.log("post response: ",x)),G.push("/"),console.log("issue create")}return{estat:e,TEstats:C,tipus:N,TTipus:T,gravetat:I,TPrioritat:j,prioritat:f,TGravetat:A,titleIssue:n,description:E,assignat:p,userAssignName:y,avatarAssignat:r,selectAssign:V,allUsers:L,dataLimit:U,isTimeLine:_,showDatePickker:t,bloquejat:B,motiuBlock:P,getidCookie:O,sethref:S,esborrar_assignacio:ne,assignSelect:Z,autoAssign:te,setGravetat:Q,setTipus:H,createNewIssue:le,setPrioritat:z}}},re={class:"lightbox lightbox-generic-form lightbox-create-edit open"},ce={class:"close",href:"/#/list"},ue=s("h2",{class:"title"},"New issue",-1),de={class:"form-wrapper"},fe={class:"main"},ve={class:"sidebar ticket-data"},me={key:0,style:{border:"1px solid black","border-radius":"10px"}},_e={key:1,style:{display:"flex","justify-content":"space-between","margin-left":"5px","margin-right":"5px","background-color":"whitesmoke",padding:"5px","min-width":"200px"}},ge=["src"],pe=["href"],ke={class:"ticket-data-container",style:{"margin-top":"10px"}},he={style:{display:"flex","justify-content":"space-between","margin-left":"10px"}},ye=s("label",null," type ",-1),xe={style:{display:"flex","justify-content":"space-between","margin-left":"10px"}},be=s("label",null," severity ",-1),we={style:{display:"flex","justify-content":"space-between","margin-left":"10px"}},Ce=s("label",null," priority ",-1),Te={class:"ticket-section ticket-detail-settings"},Ae={class:"ticket-detail-settings"},je={style:{display:"flex","justify-content":"space-between"}},Ne={style:{display:"flex","justify-content":"space-between"}},Ie=s("label",{style:{"margin-top":"5px","margin-right":"5px"}},"Motiu: ",-1);function Ue(G,n,E,e,N,I){const f=u("font-awesome-icon"),p=u("v-select"),r=u("v-btn"),y=u("v-card-title"),U=u("v-text-field"),B=u("SelectUsers"),P=u("v-card-text"),V=u("v-card"),L=u("v-dialog"),C=u("v-list-item-title"),T=u("v-list-item"),A=u("v-list"),j=u("v-menu");return d(),b("div",re,[s("a",ce,[o(f,{icon:"xmark"})]),s("div",null,[ue,s("div",null,[s("div",de,[s("div",fe,[w(s("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>e.titleIssue=t),type:"text"},null,512),[[D,e.titleIssue]]),w(s("textarea",{"onUpdate:modelValue":n[1]||(n[1]=t=>e.description=t),rows:"7",placeholder:"Description",class:"description ng-pristine ng-untouched ng-valid ng-empty",style:{"margin-top":"5px"}},null,512),[[D,e.description]])]),s("div",ve,[s("div",null,[o(p,{class:"ml-3",label:"Select",density:"compact",items:e.TEstats,modelValue:e.estat,"onUpdate:modelValue":n[2]||(n[2]=t=>e.estat=t)},null,8,["items","modelValue"]),e.assignat==null?(d(),b("div",me,[o(L,{modelValue:e.selectAssign,"onUpdate:modelValue":n[4]||(n[4]=t=>e.selectAssign=t),width:"auto"},{activator:l(({props:t})=>[o(r,R(t,{variant:"text",class:"ticket-users-actions ml-0"}),{default:l(()=>[m(" Assign ")]),_:2},1040)]),default:l(()=>[o(V,{width:"600px"},{default:l(()=>[o(y,null,{default:l(()=>[m(" Select user ")]),_:1}),o(P,null,{default:l(()=>[o(U,{placeholder:"Search for users"}),o(B,{type:"assign",users:e.allUsers,onUserSelect:e.assignSelect},null,8,["users","onUserSelect"]),o(r,{onClick:n[3]||(n[3]=t=>e.selectAssign=!1),color:"red",class:"mt-10 ml-16"},{default:l(()=>[m(" close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(r,{variant:"text",onClick:n[5]||(n[5]=t=>e.autoAssign())},{default:l(()=>[m(" Assign to me ")]),_:1})])):(d(),b("div",_e,[s("img",{src:e.avatarAssignat,width:"60",height:"60"},null,8,ge),s("a",{href:e.sethref("usuaris/",e.getidCookie()),style:{"margin-top":"20px"}},k(e.userAssignName),9,pe),s("button",{onClick:n[6]||(n[6]=t=>e.esborrar_assignacio()),variant:"flat",color:"whitesmoke"},[o(f,{icon:"xmark"})])])),s("div",ke,[s("div",he,[ye,o(j,null,{activator:l(({props:t})=>[o(r,R(t,{variant:"text"}),{default:l(()=>[m(k(e.tipus),1)]),_:2},1040)]),default:l(()=>[o(A,null,{default:l(()=>[(d(!0),b(q,null,M(e.TTipus,(t,_)=>(d(),h(T,{key:_,value:_},{default:l(()=>[o(C,{onClick:S=>e.setTipus(t)},{default:l(()=>[m(k(t),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),s("div",xe,[be,o(j,null,{activator:l(({props:t})=>[o(r,R(t,{variant:"text"}),{default:l(()=>[m(k(e.gravetat),1)]),_:2},1040)]),default:l(()=>[o(A,null,{default:l(()=>[(d(!0),b(q,null,M(e.TGravetat,(t,_)=>(d(),h(T,{key:_,value:_},{default:l(()=>[o(C,{onClick:S=>e.setGravetat(t)},{default:l(()=>[m(k(t),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),s("div",we,[Ce,o(j,null,{activator:l(({props:t})=>[o(r,R({variant:"text"},t),{default:l(()=>[m(k(e.prioritat),1)]),_:2},1040)]),default:l(()=>[o(A,null,{default:l(()=>[(d(!0),b(q,null,M(e.TPrioritat,(t,_)=>(d(),h(T,{key:_,value:_},{default:l(()=>[o(C,{onClick:S=>e.setPrioritat(t)},{default:l(()=>[m(k(t),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),s("section",Te,[s("div",Ae,[s("div",null,[e.isTimeLine?(d(),h(r,{key:0,style:{background:"red"},variant:"flat",onClick:n[7]||(n[7]=t=>{e.isTimeLine=!1,e.showDatePickker=!1})},{default:l(()=>[o(f,{icon:"clock"})]),_:1})):(d(),h(r,{key:1,onClick:n[8]||(n[8]=t=>e.showDatePickker=!0),variant:"flat"},{default:l(()=>[o(f,{icon:"clock"})]),_:1}))]),s("div",null,[e.bloquejat?(d(),h(r,{key:0,variant:"flat",style:{background:"red","margin-left":"5px"},onClick:n[9]||(n[9]=t=>e.bloquejat=!1)},{default:l(()=>[o(f,{icon:"lock"})]),_:1})):(d(),h(r,{key:1,style:{"margin-left":"5px"},onClick:n[10]||(n[10]=t=>e.bloquejat=!0),variant:"flat"},{default:l(()=>[o(f,{icon:"lock"})]),_:1}))])])]),w(s("div",je,[w(s("input",{type:"date","onUpdate:modelValue":n[11]||(n[11]=t=>e.dataLimit=t)},null,512),[[D,e.dataLimit]]),o(r,{onClick:n[12]||(n[12]=t=>e.isTimeLine=!0),style:{"margin-left":"5px"},variant:"flat"},{default:l(()=>[o(f,{icon:"floppy-disk"})]),_:1})],512),[[W,e.showDatePickker]]),w(s("div",Ne,[Ie,w(s("input",{type:"text","onUpdate:modelValue":n[13]||(n[13]=t=>e.motiuBlock=t)},null,512),[[D,e.motiuBlock]])],512),[[W,e.bloquejat]])])])]),o(r,{onClick:n[14]||(n[14]=t=>e.createNewIssue()),class:"btn-big add-item",style:{"margin-top":"10px","margin-bottom":"10px"}},{default:l(()=>[m(" Enviar ")]),_:1})])])])}const Ve=oe(ae,[["render",Ue]]);export{Ve as default};
